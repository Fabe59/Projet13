langage: python

python:
  - '3.8'

addons:
  chrome: stable

install:
  - pip install pipenv
  - pip install tchappui-webdrivers
  - pipenv install

branches:
  only:
    - master

before_script:
  - install-webdrivers

env:
  - DJANGO_SETTINGS_MODULE="openrider.settings"
  - SECRET_KEY="+09^7okw6r3be!udnmpdikdb0*mlz4v%$4dz18yf#=p7fuy1*+"
  - ALLOWED_HOSTS = "127.0.0.1"
  - DB_USER = 'postgres'

services:
  - postgresql

script:
  - cd openrider && python manage.py test -v2